# EnvoyProxy config so the Envoy Service uses the existing static PIP (pip-envoy-gateway)
# created in rg-learning-aks (NOT the MC_ node resource group).
# The azure-load-balancer-resource-group must match where the PIP actually lives.
#
apiVersion: gateway.envoyproxy.io/v1alpha1
kind: EnvoyProxy
metadata:
  name: envoy-proxy-azure-pip
  namespace: default
spec:
  provider:
    type: Kubernetes
    kubernetes:
      envoyService:
        annotations:
          service.beta.kubernetes.io/azure-pip-name: pip-envoy-gateway
          service.beta.kubernetes.io/azure-load-balancer-resource-group: "rg-learning-aks"
